- module-name: 'playwright'
  data-files:
    patterns:
      - '**/*.json'
      - '**/*.js'
      - '**/*.ts'
      - '**/*.html'
      - '**/*.css'
      - '**/*.svg'

  dlls:
    - from_filenames:
        relative_path: 'driver'
        prefixes:
          - 'node'
        executable: 'yes'

- module-name: 'playwright._impl._transport'
  anti-bloat:
    - description: 'fix globals.get() usage'
      replacements_plain:
        'globals().get("_compiled__")' : 'globals().get("__compiled__")'
      when: 'version("playwright") >= (1, 45, 0)'

    - description: 'support for older versions of playwright'
      replacements_plain:
        'if getattr(sys, "frozen", False):': 'if getattr(sys, "frozen", False) or "__compiled__" in globals():'
      when: 'version("playwright") < (1, 45, 0)'

